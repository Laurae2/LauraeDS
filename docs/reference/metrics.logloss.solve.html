<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Logarithmic Loss Solver — metrics.logloss.solve â€¢ LauraeDS</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">LauraeDS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Logarithmic Loss Solver</h1>
    </div>

    
    <p>Reverse engineers the prediction or the positive sample ratio to provide to achieve a known loss.</p>
    

    <pre class="usage"><span class='fu'>metrics.logloss.solve</span>(<span class='no'>to_solve</span>, <span class='kw'>known_loss</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>known_pred</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>known_ratio</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>to_solve</th>
      <td><p>Type: character. What to solve.</p><ul>
<li><p><code>"pred"</code> solves for the best constant prediction value provided the <code>known_loss</code> and <code>known_ratio</code>. Use <code>known_loss</code> as <code>0</code> if you want to minimize the loss function. Provide another value when reverse-engineering the prediction is required. Although the solving equation can be expressed as an exact formula (with an exact solution), the solver uses an approximate method (Brent) to fit rare cases such as loss minimization provided a single ratio.</p></li>
<li><p><code>"ratio"</code> solves for the best constant ratio of positives over (positives + negatives), provided the <code>known_loss</code> and <code>known_pred</code>. Use <code>known_loss</code> as <code>0</code> if you want to minimize the loss function. Provide another value when reverse-engineering the ratio is required. It uses an approximate solving method (Brent).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>known_loss</th>
      <td><p>Type: numeric. The known loss issued from the logartihmic loss.</p></td>
    </tr>
    <tr>
      <th>known_pred</th>
      <td><p>Type: numeric. The prediction value which must be fixed. Must be provided when <code>to_solve == "ratio"</code> Defaults to <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>known_ratio</th>
      <td><p>Type: numeric. The positive ratio which must be fixed. Must be provided when <code>to_solve == "pred"</code> Defaults to <code>NULL</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The solved value.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Note: this example unexpectedly fails when using pkgdown.</span>
<span class='co'># Example from https://www.kaggle.com/opanichev/mean-baseline-lb-0-30786/code</span>
<span class='co'># WSDM - KKBox's Churn Prediction Challenge (public score: 0.17689)</span>

<span class='co'># Reverse engineeer ratio of positives in Public Leaderboard</span>
<span class='fu'>print</span>(<span class='fu'>metrics.logloss.solve</span>(<span class='kw'>to_solve</span> <span class='kw'>=</span> <span class='st'>"ratio"</span>,
                            <span class='kw'>known_loss</span> <span class='kw'>=</span> <span class='fl'>0.17695680071494552</span>,
                            <span class='kw'>known_pred</span> <span class='kw'>=</span> <span class='fl'>0.08994191315811156</span>), <span class='kw'>digits</span> <span class='kw'>=</span> <span class='fl'>17</span>)</div><div class='output co'>#&gt; [1] 0.035737961921635884</div><div class='input'>
<span class='co'># Reverse engineer the prediction value used in Public Leaderboard</span>
<span class='fu'>print</span>(<span class='fu'>metrics.logloss.solve</span>(<span class='kw'>to_solve</span> <span class='kw'>=</span> <span class='st'>"pred"</span>,
                            <span class='kw'>known_loss</span> <span class='kw'>=</span> <span class='fl'>0.17695680071494552</span>,
                            <span class='kw'>known_ratio</span> <span class='kw'>=</span> <span class='fl'>29650</span> / (<span class='fl'>800000</span> + <span class='fl'>29650</span>)), <span class='kw'>digits</span> <span class='kw'>=</span> <span class='fl'>17</span>)</div><div class='output co'>#&gt; [1] 0.089941912818003567</div><div class='input'>
<span class='co'># Find better prediction value for the Public Leaderboard</span>
<span class='fu'>print</span>(<span class='fu'>metrics.logloss.solve</span>(<span class='kw'>to_solve</span> <span class='kw'>=</span> <span class='st'>"pred"</span>,
                            <span class='kw'>known_loss</span> <span class='kw'>=</span> <span class='fl'>0</span>,
                            <span class='kw'>known_ratio</span> <span class='kw'>=</span> <span class='fl'>29650</span> / (<span class='fl'>800000</span> + <span class='fl'>29650</span>)), <span class='kw'>digits</span> <span class='kw'>=</span> <span class='fl'>17</span>)</div><div class='output co'>#&gt; [1] 0.035737961195227909</div><div class='input'><span class='fu'>cat</span>(<span class='st'>"My better logloss: "</span>,
    -<span class='fl'>1</span> * ((<span class='fl'>0.03573796</span>) * <span class='fu'>log</span>(<span class='fl'>0.03573796</span>) + ((<span class='fl'>1</span> - <span class='fl'>0.03573796</span>) * <span class='fu'>log</span>(<span class='fl'>1</span> - <span class='fl'>0.03573796</span>))),
    <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>""</span>)</div><div class='output co'>#&gt; My better logloss: 0.1541541</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
